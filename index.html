<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>sherpa - simple web api's for web apps</title>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
<div class="crumbs">
	<a href="../">mjl</a> &gt;
	<a class="last" href="./">sherpa intro</a>
</div>

<div class="tocbar">
	<a class="active" href="./">Intro</a> |
	<a href="apidocs/">API documentation</a> |
	<a href="sherpajs/">sherpa.js</a> |
	<a href="specification/">Specification</a> |
	<a href="implementations/">Implementations</a> |
	<a href="faq/">FAQ</a> |
	<a href="why/">Why</a>
</div>

<h1 id="sherpa"><a href="#sherpa">Sherpa</a> - simple web API's</h1>

Sherpa is a protocol with a <a href="specification/">specification</a> and has <a href="implementations/">implementations</a> in several languages.

<h2>Why sherpa?</h2>
It's simple for:
<ul>
<li>Backend developers: Trivially export your functions using one of the small <a href="implementations/">libraries</a>.</li>
<li>Frontend developers: Include a <a href="sherpajs/">sherpa.js</a>, call a function and get a promise back.</li>
<li>All developers: API's are self-describing and self-documenting, see <a href="apidocs/">API documentation</a>.</li>
</ul>

<h1 id="comparison">Comparison</h1>
<table class="table-comparison">
	<thead>
		<tr>
			<th></th>
			<th style="padding:0 1rem">REST</th>
			<th style="padding:0 1rem">JSON-RPC</th>
			<th style="padding:0 1rem">gRPC</th>
			<th style="padding:0 1rem">Sherpa</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="label">Maps naturally to backend code</td>
			<td class="no">No</td>
			<td class="yes">Yes</td>
			<td class="yes">Yes</td>
			<td class="yes">Yes</td>
		</tr>
		<tr>
			<td class="label">Self-describing</td>
			<td class="no">No</td>
			<td class="no">No</td>
			<td class="yes">Yes</td>
			<td class="yes">Yes</td>
		</tr>
		<tr>
			<td class="label">Includes documentation</td>
			<td class="no">No</td>
			<td class="no">No</td>
			<td class="no">No</td>
			<td class="yes">Yes</td>
		</tr>
		<tr>
			<td class="label">Optimized for speed</td>
			<td class="no">No</td>
			<td class="no">No</td>
			<td class="yes">Yes</td>
			<td class="no">No</td>
		</tr>
		<tr>
			<td class="label">Easy to use in frontend code</td>
			<td class="no">No</td>
			<td class="yes">Yes</td>
			<td class="no">No</td>
			<td class="yes">Yes</td>
		</tr>
		<tr>
			<td class="label">Everyone does it</td>
			<td class="yes">Yes</td>
			<td class="no">No</td>
			<td class="no">No</td>
			<td class="no">No</td>
		</tr>
	</tbody>
</table>

<h1 id="quickstart">Quickstart - Examples</h1>
<p>Call function of existing sherpa API in web app:</p>
<code><pre style="font-size:0.8rem">
&lt;script src="https://sherpa.irias.nl/example/sherpa.js"&gt;&lt;/script&gt;
&lt;script&gt;
    example.requestCount()
        .then(function(count) {
            console.log('successful result', count);
        }, function(error) {
            console.error('an error occurred', error.code, error.message);
        });
&lt;/script&gt;
</pre></code>

<p>Export a sherpa API called Example, with a function requestCount, using the Go library:</p>
<code><pre style="font-size:0.8rem">
/* To run this file as main.go:
go install bitbucket.org/mjl/sherpa/cmd/sherpadoc
sherpadoc Example > example.json
go run main.go
*/
package main

import (
    "bitbucket.org/mjl/sherpa"
    "encoding/json"
    "log"
    "net/http"
    "os"
    "sync/atomic"
)

// This is the API. These comments are added to the documentation by sherpadoc.
type Example struct {
}

var count *int64

// Count the number of requests.
// This comment and the function signature are automatically added to the documentation.
func (_ Example) RequestCount() int64 {
    return atomic.AddInt64(count, 1)
}

// read documentation generated by sherpadoc
func readDoc() *sherpa.Doc {
    doc := &sherpa.Doc{}
    f, err := os.Open("example.json")
    if err == nil {
        defer f.Close()
        err = json.NewDecoder(f).Decode(doc)
    }
    if err != nil {
        log.Fatal(err)
    }
    return doc
}

func main() {
    count = new(int64)
    handler, err := sherpa.NewHandler("/example/", "1.0.0", Example{}, readDoc(), nil)
    if err != nil {
        log.Fatal(err)
    }
    http.Handle("/example/", handler)
    log.Fatal(http.ListenAndServe(":8080", nil))
}
</pre></code>


<h1 id="more">More</h1>
<p>
Learn more from the <a href="faq/">frequently asked questions</a>.<br/>
Read <a href="why/">why</a> sherpa was created.
</p>
	</body>
</html>
