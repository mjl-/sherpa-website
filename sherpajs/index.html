<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>Consuming - Sherpa</title>
		<link rel="stylesheet" href="../style.css" />
	</head>
	<body>
<div class="crumbs">
	<a href="../../">mjl</a> &gt;
	<a href="../">sherpa</a> &gt;
	<a class="last" href="./">Consuming</a>
</div>

<div class="tocbar">
	<a href="../">Intro</a> |
	<a href="../apidocs/">API documentation</a> |
	<a class="active" href="../sherpajs/">Consuming</a> |
	<a href="../specification/">Specification</a> |
	<a href="../implementations/">Implementations</a> |
	<a href="../faq/">FAQ</a> |
	<a href="../why/">Why</a>
</div>

<h1 id="sherpajs"><a href="#sherpajs">sherpa.js</a></h1>
<p>Every sherpa API comes with its own tiny, automatically generated, standalone JavaScript library that makes it trivial to start using that API from a browser.</p>

<p>Especially for small or internal projects, where you create both the backend and the frontend code, this is all you need to create a web app.</p>

<p>If a sherpa API lives at <a href="https://www.sherpadoc.org/example/">https://www.sherpadoc.org/example/</a> (try it!), just add <tt>"sherpa.js"</tt> to load the library: <a href="https://www.sherpadoc.org/example/sherpa.js">https://www.sherpadoc.org/example/sherpa.js</a>. It exports an object <tt>"example"</tt> and contains all exported functions and a field <tt>"_sherpa"</tt> with basic information about this sherpa API.  The functions can be called and will return a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then">"thenable"</a>: An object on which you can call <tt>".then()"</tt> to register a success and error handler.</p>

<p>On success, your success handler will be called with a single value: whatever the server returned.  It's always a single value, functions that return multiple values will have a JavaScript array as a result.</p>
<p>On error, you error handler will be called with an error object.  This object contains a field <tt>"code"</tt> (a string, to be used in your error handler, the API documentation will explain which errors can happen), and a field <tt>"message"</tt> (human-readable, for display to the end-user).</p>

<p>Note: Thenable are not full promises. Not all browsers support promises natively. However, you can easily turn sherpa's thenable into promises (or something similar): Set the variable <tt>"_wrapThenable"</tt> on the sherpa API object to a function that takes a <i>thenable</i> as parameter, and that returns a promise(-like) object of your choosing. For example, your function could return <tt>"new Promise(thenable)"</tt>, or if you use angularjs, you can add a line <tt>"example._wrapThenable = $q;"</tt>.</p>

<p>That's all you need to know for a quick JavaScript web app.</p>

<h1 id="using-external-sherpa-apis"><a href="#using-external-sherpa-apis">Using external sherpa API's</a></h1>
<p>
If you need to use a sherpa API from JavaScript that someone else provided, you probably don't want to load their JavaScript. For this use case, a standalone sherpa JavaScript library is available.  See <a href="https://github.com/mjl-/sherpajs">github.com/mjl-/sherpajs</a>.
</p>

<h1 id="sherpats"><a href="#sherpats">Typescript with "sherpats"</a></h1>
<p>Sherpa documentation now contains type information about parameters/return  values of API functions. You can use this type information to generate a typescript library that exports those functions along with their types. This lets you typesafely use a sherpa API. <a href="https://github.com/mjl-/sherpats">Sherpats</a> is the tool that reads sherpadoc and writes a typescript module.</p>

<code><pre>sherpats &lt; example.json &gt; example.ts</pre></code>

<h1 id="other"><a href="#other">Other languages</a></h1>
<p>
Want to consume a sherpa API from another language? Have a look at the <a href="../implementations/">list of sherpa implementations</a>.
</p>
	</body>
</html>
